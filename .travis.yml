language: go
go:
- 1.11.x
os:
- linux
dist: trusty
env:
  global:
  - TARGET=oceano2oceansites
  - DIST=ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME/
#  - secure: Oe4tuCG+6IvilDR/NTos07eusDb5mBKfUGvhks61K9fBQdBKFdK+45npA8a8bAR65itl7oGHe/YT42GVOTvJfwqfGzM2YMIbYoa02az57bz/56iQjr75XnND6T7XljxYai1s6dGNG3oN1mmV1WSAawPQsRQ7XeZ5CiR2h7I/Rv2OxSoRLO37z/10c5ZcgkUVmHtqnGKctX7uXd7dg7pJ8wBg0yvYhqMawPRiNOVQcmCG8yPf5dmNOMyaHxbXNFSAj95tpag6UHbent+TQL/GD8XRWBqrkcOkSA4aPmjVVh4bF16aBDaEcVxodfN3ox5ASF/2fpydxUU/u3axBqiJ4C5VFIIBY8X56DsWhmXoXFhxyxqOtP0tVZmvvo1kIz2iOWPIo2HF8rkCMdIdrZ84PizzPCwOKFhw5l44yA9nAwGc9CM247kquBElumE5T0lpvA2f4f+HwHRCZZI/XYSJ64xdW1G8OKpjf3p1pDff8dLP6DFYHWMrMR2Pyemrg7q0x8tkNAes38IyhChVIl4MypLRx3MKOqygW1KzP51uruzS68AjndkgpGvOCfwtiIyc1RNC6vRDwjjBE1Keo76cWDM4D/PsCiJ91c8Y32g16GnoFo4LsFTpWQ04HZKH0T7GXGNrROVNalIF6QZgmhUeRvGLq8LYoVrlOqqiH0KTIXs=
#  - secure: rmXDdTPQJLuJhS3WZ1f9rwgdJMjfSEtS2buk6Lt8DP50xJPcByEVCg2Lypopx+9CTfTEsFy6v2bTI2WT6b/5UGWuKTIHFRmwx74kLNbZE4m++XIVFqQAqiFjBHBLAPvf/2xBEGgyebkYW5uZSg83lG7lfB76fi3/RwdTr/88sdu6IfLi8DH6jlq5wmt88Hi2RO9qEb3rLA8ZZAH5v/z9mDJ+a86re78hCvOnPgG7I+kKAo2jB+UKnQP1MYgNcWskTyOYTzC90tcwVxtOtXNbZKHy9UJEQrazjY0Td+jvoDQW/Y7x9gZ1TYec8u61rqPt7/E7ak+Tp2wcagBlXT5cTyRrfoUI1SVwIej4TkCheIXJOeIkpUjUt8AR9zCR/r6vAavTdvdkc7BSNfguHIrzSR35gYuRgvHxRjHDBFkWVblrFm/5rjApj421kI833pnGJzQIMZxjyyLpYSXBOqcrCFYVkTdWXYbp6VlQ3AqcysW2K4uFHLb4z+p3ojjeJEShxHW/mT+n23DYFVBaBNMy7tdValoEoqjzju7UdMYZMrsh7R38faLvUKZfeyXXSG41NKBXh47Yg2I3sio9ItwizJavo4QRxQ3Ka5FAz+IaMRAjEyL6+dtEvqDGajg9NDgs9p9s+NlHbwVyY97mlf2S7+dARpu8ooMETszrVq5/jeg=
  - secure: z5AKDvZmIh7xE61Lo/a7Uk98XWKeKQ968OHe1HrQAvEifcdQgpT5cv69D7ewT4dRrsyOKAOPR+qAsjlqyVHbyZs/eevHchRPcrYGEHSlWeviO+0lLdALZN5JKTYfJBro2eSGjubE0ig5AXmmKX0O1kuxxMn9uh0ZtR67PUGlKFNwj7Wk1ja0l0qYyHYh5AnWYM2Z2LhFpfLYlLR222xky2U6QgCxkW+VmLTkY/tpvA1R4mW+m/rf6RxclStkmrD/rlMFGRfvvwIRbqE2iyu7bik8M0C57DIwERbchi7C5FE6ncnHNVBs0Jjo+A06rjLe8N7WreYvDagE27YxQmLC128YtoC6sYTWi14k1fncgdo0zDQSLBHy0sTvXMB/QvwvR9cdAw77PrcVEMkV2Bwlcm3A09RUZqStSvIRHUFAzLTn6RdSFxxS2iEspVXqlByOvYLJa9o413gMq4PEy0O88MCw4PjhduqPvN14pezbtlWKzqP9uOEX02a7h+hZl1c7UCiSpHnFxESjveOQ+euxEDFPP2kofMrGQnEeeRDkLX4rTxjSyGpANcTSC84Kv8COv/eoRGWB/j1+NIumyuuMUutuG8ygp8zqhhpMZUSpxJ9IDJLjVttQnATeR+Qu/1RqerSNPovp8aVU3TnNXLj8OCvE5yxBG8T95pi1iYxRgiQ=
  - secure: lzhL+xxnUtmhu2N21SXSyHIeR663hNTWhCQN793lYLcm8RhcUtbJ07sWn3Ulk7vL4Qa74lQVKkdGOdecSsX+eR3NR9wldUCr+ynyxO5oIBM4Sgi/qk/dF5VLb5yH/vRo3Ayf7jUqj85RLOo0VegMO/RoNexnF02jjtyO+v4jX38EvCLJicoLlWUXrj+Z6MOYpZN4Ra0rEyZE8otzWw2ip69XYM+vo4g2HP4WMA+3bqc9i/cwjxSClZsgYu0j7jUPjHGHk7dcE6h+4HCCna6SJzCX+79lYrTA+NU6WJxgRGtPu/HgsIvneL9JwM46fmx5Ruh9eV9XrByGCve1AEY5pBPP0tRNI5TWqawz7ExAfLMlHbwpx1nlt80ShY2BflL4G/am8+XZedvvwMr1dhaEY6zLmijOqm0f8FmawDug/53zMlJaNTr0glf9muAlmOi791UNEwu55o/05w0EHtBsot5qki3NHSAuCDJkn1ATbIl6Gy2fexzpLRpwts+cjRd92kJ6AiN5wexDTYJpLPJIt1+9XArQdwAUB8S7RWsnnLfSVkK/nJZqBP/UYfWySIVTMgNTPGuJdMha0JNkJ/PnzE+2ejjK2VYAJfGZESTTDDlH1zydZlNG5aPEtta7MCKrVfSNKraDGEVwFoKX2gksWuLKy/OG4jL2aX78eeV6ThI=
before_install:
- if [ ${TRAVIS_OS_NAME} == "linux" ]; then sudo apt-get update -q -y; fi
- if [ ${TRAVIS_OS_NAME} == "linux" ]; then sudo apt-get install libnetcdf-dev netcdf-bin
  -y; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then brew update; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then brew tap brewsci/science; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then brew install netcdf; fi
before_script:
- go get -t -v ./...
- go vet ./...
after_success:
- ls -la
- echo $DIST
- echo $TRAVIS_GO_VERSION
- echo $DIST${TRAVIS_GO_VERSION}
- curl -T $GOPATH/bin/oceano2oceansites --ftp-create-dirs $DIST${TRAVIS_GO_VERSION}
  --ftp-method singlecwd
- curl -T "{oceano2oceansites.toml,cassiopee.toml,fr25.toml}" $DIST${TRAVIS_GO_VERSION}/
- if [ ${TRAVIS_OS_NAME} == "linux" ]; then curl -T /usr/lib/libnetcdf.so $DIST${TRAVIS_GO_VERSION}/;
  f
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/netcdf/lib/libnetcdf.dylib
  $DIST${TRAVIS_GO_VERSION}/; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/szip/lib/libsz.dylib
  $DIST${TRAVIS_GO_VERSION}/ ; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/hdf5/lib/libhdf5_hl.dylib
  $DIST${TRAVIS_GO_VERSION}/ ; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/hdf5/lib/libhdf5.dylib
  $DIST${TRAVIS_GO_VERSION}/; fi
