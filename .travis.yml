language: go
go:
- 1.11.x
os:
- linux
dist: trusty
env:
  global:
  - TARGET=oceano2oceansites
  - DIST=US191/$TARGET/$TRAVIS_OS_NAME/
  - secure: Lm3HixBBEVHUwlaQ4C6IgwNLSNrR5kqTyFfrtOgYJRGKEKJoYDiUjj8NzD5ItUShIesOVXlq2a/I/0gaY8mSLl7Zejj5nDLFnp3QW7Prfusculh8urpPpTBP9RdhbEQOuHmGgEqSSlxMZkOiV2NgOFaCWtnwkXOoDhC7Kdi7HpDU13IrBubTSqHJPmA9B6x4TSA5UCZ72/rfx4ERxJHhVRNrYZt50a1CIc/kZeh4lAuDwf9MX3TeC0jNvzCBAHGYdQUSekjkjNC3p7JHDIVr165VOhM32pHETEv5ZK3MyAc+Dj2vN1Wr/dtG5SAgqd4ZTJGFr7pojS/tytnMWBeqfDBEKzMTfNIrKUiJP37jTYa/c4d067wSRCsG1KF6xtOncT6FCT32qp6xygPw6fZvsxgcRldT6jmjnLD/q7d1l8Ej9cC2s7xxsK9RP893KDplYxEOilycAxQAMD8sYL76huAL5PAIjTAOPOtE1e2ZuUtb/1iKOwU+1HQaYYbSpIEVwtTwimpgx7kkDM8yE3CpDJAEFczjk9a5xrqcIug2jpU5+Pg5wKxugthviOxxM+S33QG/AlLyoxXzikCKHWviYNZZEbNdCPwyqjuYdBttshHlyQXWR5iG2O0Ft64myAyqu2j5EIwF/wMitC/aVuvyZmqyMumpX/m/SVF+CpLOTe8= 
  - secure: lqILhPOUFr5N1je0Q3+rMDnVnXD6gpWDdMrbFAEJfij9BZ//5fw8GV8pGYJWiA8Sj72msTQPHMRDXIQvPfKujr/TmROq3/4YQ8s38x39vSnCKWO9w/Yt/EJYxUmHo/z4sP6WRX/VBBq04Xm4V8v/8MEYUejlnYcBfHEKjO+D1auLJiLge5f9RFhQR54tYiYQ8+arQBVSQOhMlHSOOSyyOJ7cmLMkqgFWZwdHMaO/N3VZw5A+d9Ml8EV3IpTwAszqKxHWuVJ7eg56QmLCDJlJTzE9KU2NvwT9p9ImfR6LpC9XyLsHRmwt9kJP9baOvEuanVO4XiFOef+WLMRfU+EtanVQvpgIfBKvTMHMh+CCDez6NXvoDhxIPK2nruKhM93Ml+YyxIVyZpLEXxr1veNDDMW7JD9yX4O/jsjiFn7VhVfJKXLn2Ck7qh3lLIKxgMaE8pqBZBqwryS8sXL4hHlBDxi4HWdbN6sNcRkgrrhglCqDVJioWhg1JrHGHxPKIa/41PTIjr2wXtXDQvZKq8qfWtQggSWrbzMPgu4cxfEl9NiI0jUtvkYqLjT2/TVsIKCq+aIJxaUeeeBNYP29L+WU1dFVuBCpAuslbzR3q84owpdfPWCuAyct3wihKMrtlsXQ4+2H7pWFmvGxtXXgUcx2uNXld5qy8osUG8F+IsX1qL8=
before_install:
- if [ ${TRAVIS_OS_NAME} == "linux" ]; then sudo apt-get update -q -y; fi
- if [ ${TRAVIS_OS_NAME} == "linux" ]; then sudo apt-get install libnetcdf-dev netcdf-bin
  -y; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then brew update; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then brew tap brewsci/science; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then brew install netcdf; fi
before_script:
- go get -t -v ./...
- go vet ./...
after_success:
- ls -la
- echo $DIST
- echo $TRAVIS_GO_VERSION
  #- echo $DIST${TRAVIS_GO_VERSION}
- curl -T $GOPATH/bin/oceano2oceansites --ftp-create-dirs ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/oceano2oceansites/linux
- curl -T "{oceano2oceansites.toml,cassiopee.toml,fr25.toml}" ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME/
- if [ ${TRAVIS_OS_NAME} == "linux" ]; then curl -T /usr/lib/libnetcdf.so ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/netcdf/lib/libnetcdf.dylib ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME/; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/szip/lib/libsz.dylib ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME/ ; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/hdf5/lib/libhdf5_hl.dylib ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME/ ; fi
- if [ ${TRAVIS_OS_NAME} == "osx" ]; then curl -T /usr/local/opt/hdf5/lib/libhdf5.dylib ftp://$FTP_USER:$FTP_PASSWORD@ftp.ifremer.fr/US191/$TARGET/$TRAVIS_OS_NAME/; fi
